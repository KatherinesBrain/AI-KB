{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://livingkb/schema/answer_envelope.schema.json",
  "title": "AnswerEnvelope",
  "type": "object",
  "required": [
    "entity_id",
    "question_intent",
    "consensus_level",
    "epistemic_type",
    "answer_fields_used",
    "raw_answer",
    "rendered_answer"
  ],
  "properties": {
    "entity_id": {
      "type": "string",
      "pattern": "^[a-z0-9_]+$"
    },
    "question_intent": { "type": "string" },
    "consensus_level": {
      "type": "string",
      "enum": [
        "consensus_high",
        "consensus_mixed",
        "frontier_early",
        "controversial",
        "historical_record"
      ]
    },
    "epistemic_type": {
      "type": "string",
      "enum": [
        "empirical_science",
        "empirical_historical",
        "expert_opinion",
        "lived_experience",
        "value_judgment",
        "mixed_empirical_hypothesis",
        "emerging_research"
      ]
    },
    "answer_fields_used": {
      "type": "array",
      "minItems": 1,
      "items": { "type": "string" }
    },
    "raw_answer": { "type": "string" },
    "rendered_answer": { "type": "string" },
    "notes_for_user": { "type": "string" },
    "frontier_notes": { "type": ["string", "null"] }
  },
  "additionalProperties": false
}

